<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="aboutAtt">





<insert id="insertCheckin" parameterType="map">
	<![CDATA[ 
		Insert into ATTENDANCE (ATT_NO, STF_NO, WH_CODE, ATT_START) values (
		to_number(to_char(SYSDATE, 'YYYYMMDD'))
		, #{stfNo}
		, case when SYSDATE <= 
		(select WH_START from (select WH_START, WH_DATE from WH_MANAGE m, ATTENDANCE a where m.WH_DATE = a.ATT_NO)
		where WH_DATE = to_number(to_char(SYSDATE, 'YYYYMMDD'))
		then 0 else 1 end
		, SYSDATE)
	]]>
</insert>


</mapper>
