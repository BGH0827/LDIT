<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="aboutAtt">


<insert id="insertCheckin" parameterType="_int">
	<![CDATA[ 
Insert into ATTENDANCE (ATT_NO, STF_NO, ATT_START, WH_CODE) values (
    to_number(to_char(SYSDATE, 'YYYYMMDD'))
    , #{stfNo}
    , SYSDATE
    , case when
                SYSDATE <=
                (select WH_START from WH_MANAGE where WH_DATE = to_number(to_char(SYSDATE, 'YYYYMMDD'))
            then 0 
            else 1
            END
)
	]]>
</insert>

<insert id="insertCheckout" parameterType="_int">
	<![CDATA[

	]]>
</insert>

<select id="getAttStart" parameterType="_int" resultType="string">
	select to_char(ATT_START, 'hh24:mi:ss') from ATTENDANCE where STF_NO = #{stfNo} and ATT_NO = to_number(to_char(SYSDATE, 'YYYYMMDD'))
</select>

<select id="countAttStart" parameterType="_int" resultType="_int">
	select count(ATT_START) from ATTENDANCE where STF_NO = #{stfNo} and ATT_NO = to_number(to_char(SYSDATE, 'YYYYMMDD'))
</select>

</mapper>
